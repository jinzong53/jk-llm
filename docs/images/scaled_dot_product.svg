<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="820" height="300" viewBox="0 0 820 300">
  <style>
    .box{fill:#fff8e1;stroke:#333;stroke-width:1.6}
    .title{font:18px sans-serif;fill:#111}
    .label{font:14px sans-serif;fill:#111}
    .op{font:13px sans-serif;fill:#0b5394}
    .arrow{stroke:#333;stroke-width:2;marker-end:url(#arrow)}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <text x="20" y="26" class="title">Scaled Dot-Product Attention</text>

  <rect x="20" y="60" width="200" height="70" class="box" rx="6"/>
  <text x="40" y="100" class="label">Q: (B, T_q, d_k)</text>

  <rect x="260" y="60" width="200" height="70" class="box" rx="6"/>
  <text x="290" y="100" class="label">K: (B, T_k, d_k)</text>

  <rect x="20" y="160" width="200" height="70" class="box" rx="6"/>
  <text x="40" y="200" class="label">V: (B, T_k, d_v)</text>

  <rect x="520" y="100" width="260" height="120" class="box" rx="6"/>
  <text x="540" y="130" class="op">1) scores = Q K^T</text>
  <text x="540" y="150" class="op">2) scores /= sqrt(d_k)</text>
  <text x="540" y="170" class="op">3) weights = softmax(scores)</text>
  <text x="540" y="190" class="op">4) output = weights * V</text>

  <!-- arrows -->
  <line x1="220" y1="95" x2="260" y2="95" class="arrow"/>
  <line x1="460" y1="95" x2="520" y2="130" class="arrow"/>
  <line x1="220" y1="195" x2="520" y2="170" class="arrow"/>

  <!-- math note -->
  <text x="20" y="280" class="label">数学：Attention(Q,K,V)=softmax(QK^T / sqrt(d_k)) V</text>
</svg>
